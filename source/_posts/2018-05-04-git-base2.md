---
title: Git-基础2
layout: post
date: 2018-05-04 07:08:45
categories: Git
tags: Git
---

## git diff

工作区：就是你在电脑里能看到的目录
暂存区：git add 是把文件到暂存区
本地仓库：工作区有一个隐藏目录 .git，这个不算工作区，而是 Git 的版本库

git diff 进行对比时不会对比新创建的文件。

`git diff branchName` 比较当前分支与 branchName 分支
`git diff branchName1 branchName2` 比较 branchName1 分支与 branchName2 分支
`git diff develop origin/develop`  比较本地 develop 分支和远程 develop 分支的差别
`git diff --staged`  比较暂存区与 HEAD
`git diff HEAD` 比较工作区与 HEAD
`git diff` 比较工作区与暂存区

## git commit

- `git commit`  提交所有添加到索引库中、或从索引库删除的文件
  输入 i 进入编辑状态，第一行添加的内容作为 summary 描述, 隔一个空行，再添加的内容作为 description 描述，按 esc 退出编辑状态，输入 shift + :，输入 wq，保存并提交。

- `git commit -m "summary 描述"`  提交所有添加到索引库中、或从索引库删除的文件
  简化版提交命令，-m 添加 summary 描述，不能添加 description 描述。

- `git commit -a`  提交所有已在索引库中发生了修改的文件，新添加的文件不会被提交
  输入 i 进入编辑状态，第一行添加的内容作为 summary 描述, 隔一个空行，再添加的内容作为 description 描述，按 esc 退出编辑状态，输入 shift + :，输入 wq，保存并提交。

- `git commit --fixup [commitId]`  提交所有添加到索引库中、或从索引库删除的文件
  提交一个新的 commit，summay 为指定 commitId 的 summay 添加了 “fixup!” 前缀。在执行 `rebase --autosquash` 命令时针对该次 commit 的操作默认为 fixup，本次提交信息会被清除，不会进入编辑提交信息的状态。

- `git commit --squash [commitId]`  提交所有添加到索引库中、或从索引库删除的文件
  提交一个新的 commit，summay 为指定 commitId 的 summay 添加了 squash!” 前缀。在执行 `rebase --autosquash` 命令时针对该次 commit 的操作默认为 squash，会进入编辑提交信息的状态。

## git rebase

类似于 git merge，将指定分支合并到当前分支。区别是 git merge 会创建一次新的提交记录，git rebase 不会，它会把当前分支里的每个提交取消掉，并且把它们临时保存为补丁(这些补丁放到".git/rebase"目录中)，然后把当前分支更新为最新的指定分支，最后再把保存的这些补丁应用到当前分支上。

“-i” 是指交互模式，就是说你可以干预 rebase 这个事务的过程，包括设置 commit message，删除 commit 等等。
“--autosquash” 是自动合并 commit 的参数。

`git rebase -i --autosquash [branchName]` 当前在特性分支上执行，合并 branchName 分支到当前分支

`git rebase -i --autosquash [branchName] [feature]` 无需在特性分支上执行

`git rebase --abort` 终止 rebase 的行动，回到 rebase 前的状态

特性分支合并了最新的主分支后，原有的 commit 是逐个应用到当前分支的，当正常执行的 commit 与已有代码发生冲突时，需执行下面三部，直到 rebase 成功。

① 解决冲突

② `git add .`

③ `git rebase --continue`